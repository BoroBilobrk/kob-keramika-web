<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <title>KOB-Keramika â€“ Pro obraÄun prostorije</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/css/main.css">
</head>
<body>

<header>
  <div class="left">
    <img src="assets/logo.png" class="logo" alt="Logo">
    <div>
      <div class="app-title">KOB-Keramika</div>
      <div class="app-subtitle">Pro obraÄun prostorije</div>
    </div>
  </div>
  <div class="user-info" id="userInfo">Nije prijavljen</div>
</header>

<main>

  <!-- HOME -->
  <section id="homeView" class="view" style="display:block;">
    <div class="card">
      <h2>Å to Å¾eliÅ¡ raditi?</h2>
      <button id="btnOpenAutoCalc">ğŸ§® Automatski obraÄun prostorije</button>
      <button id="btnOpenMeasures" class="secondary">âœï¸ RuÄni unos mjera</button>
      <button id="btnOpenCosts" class="secondary">ğŸ’° TroÅ¡kovi</button>
      <button id="btnOpenPrices" class="secondary">ğŸ’¶ Cjenik</button>
      <button id="btnOpenArchive" class="secondary">ğŸ“‚ Arhiva obraÄuna</button>
    </div>
  </section>

  <!-- AUTO CALC -->
  <section id="autoCalcView" class="view">
    <div class="card">
      <button class="secondary btn-back" data-target="homeView">â† Natrag</button>
      <h2>ğŸ§® Automatski obraÄun prostorije</h2>
    </div>

    <div class="card">
      <div class="section-title">ğŸ— Podaci o gradiliÅ¡tu</div>
      <label>Naziv gradiliÅ¡ta
        <input id="siteName" placeholder="npr. Hotel Aurora">
      </label>
      <label>Naziv prostorije
        <input id="roomName" placeholder="npr. Kupaonica 101">
      </label>
      <label>Broj situacije
        <input id="situationNo" placeholder="npr. S-12">
      </label>
      <label>Investitor
        <input id="investorName" placeholder="npr. Jadranka d.d.">
      </label>
    </div>

    <!-- Prostorije na gradiliÅ¡tu -->
    <div class="card">
      <div class="section-title">ğŸ“‹ Prostorije na gradiliÅ¡tu</div>
      <p class="hint">
        Dodaj viÅ¡e prostorija za isto gradiliÅ¡te. Sve ulaze u PDF graÄ‘evinske knjige.
      </p>
      <div class="row-actions">
        <button type="button" class="btn-small" id="btnAddRoomToSite">
          â• Dodaj / aÅ¾uriraj ovu prostoriju u listu
        </button>
        <button type="button" class="btn-small secondary" id="btnClearRooms">
          ğŸ—‘ OÄisti listu prostorija
        </button>
      </div>
      <div id="roomsList" class="rooms-list"></div>
    </div>

    <!-- Format ploÄica -->
    <div class="card">
      <div class="section-title">ğŸ§± Format ploÄica</div>
      <label>Odaberi format
        <select id="tileFormatSelect">
          <option value="">-- odaberi --</option>
          <option value="60x60">60 Ã— 60 cm</option>
          <option value="75x75">75 Ã— 75 cm</option>
          <option value="100x100">100 Ã— 100 cm</option>
          <option value="120x120">120 Ã— 120 cm</option>
          <option value="100x300">100 Ã— 300 cm</option>
          <option value="60x120">60 Ã— 120 cm</option>
          <option value="custom">PrilagoÄ‘enoâ€¦</option>
        </select>
      </label>
      <div id="tileCustomFields" class="tile-custom" style="display:none;">
        <label>Å irina (cm)
          <input id="tileW" placeholder="npr. 30">
        </label>
        <label>Visina (cm)
          <input id="tileH" placeholder="npr. 60">
        </label>
      </div>
    </div>

    <!-- Dimenzije + ostalo -->
    <div class="layout-split">
      <div>
        <div class="card">
          <div class="section-title">ğŸ“ Dimenzije prostorije</div>
          <label>DuÅ¾ina (m)
            <input id="dimD" placeholder="npr. 3,20">
          </label>
          <label>Å irina (m)
            <input id="dimS" placeholder="npr. 2,40">
          </label>
          <label>Visina (m)
            <input id="dimV" placeholder="npr. 2,60">
          </label>
        </div>

        <div class="card">
          <div class="section-title">ğŸ”§ Stavke</div>
          <label><input type="checkbox" id="chkPod"> RaÄunaj pod</label>
          <label><input type="checkbox" id="chkZidovi"> RaÄunaj zidove</label>
          <label><input type="checkbox" id="chkHidro"> Hidroizolacija</label>
          <label><input type="checkbox" id="chkSilikon"> Silikon</label>
          <label><input type="checkbox" id="chkSokl"> Sokl</label>
          <label><input type="checkbox" id="chkGerung"> Lajsne / gerung</label>
          <label><input type="checkbox" id="chkDodatne"> UkljuÄi dodatne mjere</label>
        </div>

        <div class="card">
          <div class="section-title">â• Dodatne mjere</div>
          <div id="dmContainer"></div>
          <button class="btn-small secondary" id="btnAddDm">â• Dodaj mjeru</button>
        </div>

        <div class="card">
          <button id="btnCalcNow">ğŸ” IzraÄunaj sve</button>
          <button id="btnExportPdfAuto" class="secondary">ğŸ“„ PDF â€“ graÄ‘evinska knjiga</button>
          <button id="btnExportCsvAuto" class="secondary">ğŸ“‘ CSV â€“ Excel export</button>
          <button id="btnSaveCloud" class="secondary">â˜ï¸ Spremi u Cloud</button>
        </div>
      </div>

      <div>
        <div class="card">
          <div class="section-title">
            ğŸ§± Otvori (vrata, prozori, niÅ¡e, geberit, vertikale)
          </div>
          <p class="hint">
            Vrata se odbijaju od zidova, prozori/niÅ¡e ulaze u hidro i silikon.
          </p>
          <div class="openings-header">
            <button id="btnAddDoor" class="btn-small">â• Vrata</button>
            <button id="btnAddWindow" class="btn-small">â• Prozor</button>
            <button id="btnAddNiche" class="btn-small">â• NiÅ¡a</button>
            <button id="btnAddGeberit" class="btn-small">â• Geberit</button>
            <button id="btnAddVert" class="btn-small">â• Vertikala</button>
            <button id="btnAddCustom" class="btn-small">â• Custom otvor</button>
          </div>
          <div id="openingsList"></div>
        </div>

        <div class="card" id="calcResult" style="display:none;">
          <h3>ğŸ“Š Rezultati obraÄuna</h3>
          <div id="calcOutput"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- RUÄŒNI UNOS MJERA -->
  <section id="measuresView" class="view">
    <div class="card">
      <button class="secondary btn-back" data-target="homeView">â† Natrag</button>
      <h2>âœï¸ RuÄni unos mjera</h2>
      <p class="hint">
        Jednostavna tablica za ruÄni unos mjera (kopiraj u Excel po potrebi).
      </p>
    </div>
    <div class="card">
      <table class="table">
        <thead>
          <tr>
            <th>Naziv</th>
            <th>Mjera</th>
            <th>Jed.</th>
          </tr>
        </thead>
        <tbody id="manualMeasuresBody">
          <tr>
            <td><input type="text" placeholder="Pod"></td>
            <td><input type="text" placeholder="12,50"></td>
            <td><input type="text" placeholder="m2"></td>
          </tr>
        </tbody>
      </table>
      <button id="btnAddManualMeasure" class="btn-small secondary">â• Dodaj red</button>
    </div>
  </section>

  <!-- TROÅ KOVI -->
  <section id="costsView" class="view">
    <div class="card">
      <button class="secondary btn-back" data-target="homeView">â† Natrag</button>
      <h2>ğŸ’° TroÅ¡kovi</h2>
    </div>
    <div class="card">
      <label>Cijena rada po satu (EUR)
        <input id="costHourly" placeholder="npr. 15">
      </label>
      <label>Broj sati rada
        <input id="costHours" placeholder="npr. 8">
      </label>
      <label>Ostali troÅ¡kovi (gorivo, cestarina, materijalâ€¦) (EUR)
        <input id="costOther" placeholder="npr. 20">
      </label>
      <button id="btnCalcCosts">ğŸ” IzraÄunaj troÅ¡ak</button>
      <div id="costsOutput" class="costs-output"></div>
    </div>
  </section>

  <!-- CJENIK -->
  <section id="pricesView" class="view">
    <div class="card">
      <button class="secondary btn-back" data-target="homeView">â† Natrag</button>
      <h2>ğŸ’¶ Cjenik</h2>
      <p class="hint">JediniÄne cijene koje koristi automatski obraÄun.</p>
    </div>
    <div class="card">
      <div id="pricesList"></div>
    </div>
  </section>

  <!-- ARHIVA -->
  <section id="archiveView" class="view">
    <div class="card">
      <button class="secondary btn-back" data-target="homeView">â† Natrag</button>
      <h2>ğŸ“‚ Arhiva obraÄuna (Cloud)</h2>
      <p class="hint">Svi spremljeni obraÄuni.</p>
    </div>
    <div class="card">
      <div id="archiveList"></div>
    </div>
  </section>

</main>

<!-- JSPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- Firebase CDN (v8) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

<!-- NaÅ¡ modulni app -->
<script type="module" src="js/app.js"></script>

</body>
</html>
