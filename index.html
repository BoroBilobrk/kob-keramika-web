<!doctype html>
<html lang="hr">
<head>
  <meta charset="utf-8" />
  <title>KOB-Keramika â€“ Interni obraÄun</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Glavni CSS -->
  <link rel="stylesheet" href="CSS/main.css" />
</head>
<body>
  <div class="app-shell">
    <!-- GORNJI HEADER -->
    <header class="app-header">
      <div class="brand">
        <img src="logo.png" alt="KOB-Keramika logo" class="brand-logo" />
        <div class="brand-text">
          <h1>KOB-Keramika</h1>
          <p>Interni obraÄun keramiÄarskih radova</p>
        </div>
      </div>
      <div class="user-box">
        <span id="userStatus">Nije prijavljen</span>
        <button id="btnLogout" class="btn ghost small hidden">Odjava</button>
      </div>
    </header>

    <!-- HERO + AUTH -->
    <main>
      <section id="landing" class="card landing">
        <div class="landing-left">
          <h2>Profesionalni obraÄun keramiÄarskih radova</h2>
          <p>
            Automatski izraÄun poda, zidova, hidroizolacije, trake, silikona
            i viÅ¡e prostorija po projektu â€“ uz moguÄ‡nost spremanja u Cloud.
          </p>
        </div>

        <div class="landing-right">
          <div class="auth-box">
            <h3>Prijava</h3>
            <form id="loginForm" class="form">
              <label>
                E-mail
                <input type="email" id="loginEmail" required placeholder="you@example.com" />
              </label>
              <label>
                Lozinka
                <input type="password" id="loginPassword" required minlength="6" />
              </label>
              <button type="submit" class="btn primary full">Prijava</button>
            </form>

            <div class="divider">ili</div>

            <h3>Registracija</h3>
            <form id="registerForm" class="form">
              <label>
                E-mail
                <input type="email" id="regEmail" required placeholder="you@example.com" />
              </label>
              <label>
                Lozinka (min. 6 znakova)
                <input type="password" id="regPassword" required minlength="6" />
              </label>
              <button type="submit" class="btn secondary full">Registracija</button>
            </form>

            <div id="authMessage" class="auth-message"></div>
          </div>
        </div>
      </section>

      <!-- NAVIGACIJA (vidljiva tek nakon prijave) -->
      <nav id="mainNav" class="main-nav hidden">
        <button class="nav-btn active" data-view="quickCalcView">Brzi obraÄun</button>
        <button class="nav-btn" data-view="projectsView">Projekti</button>
        <button class="nav-btn" data-view="archiveView">Arhiva</button>
      </nav>

      <!-- APLIKACIJSKI SADRÅ½AJ (sakriven dok korisnik nije prijavljen) -->
      <section id="appContent" class="app-content hidden">

        <!-- BRZI OBRAÄŒUN -->
        <section id="quickCalcView" class="view card active">
          <h2>Brzi obraÄun prostorije</h2>

          <div class="grid-3">
            <label>
              Duljina D (m)
              <input type="text" id="dimD" placeholder="npr. 4,20" />
            </label>
            <label>
              Å irina Å  (m)
              <input type="text" id="dimS" placeholder="npr. 3,10" />
            </label>
            <label>
              Visina V (m)
              <input type="text" id="dimV" placeholder="npr. 2,65" />
            </label>
          </div>

          <h3 class="sub-title">Dodatne dimenzije prostorije</h3>
          <p class="hint">
            Svaki red predstavlja dodatni dio (uvuÄen zid, proÅ¡irenjeâ€¦). UtjeÄe na pod, zidove,
            hidro pod, traku i silikon.
          </p>

          <div id="dmContainer" class="dm-container">
            <!-- redovi se dodaju dinamiÄki -->
          </div>
          <button id="btnAddDmRow" class="btn ghost full">+ Dodaj dodatne dimenzije</button>

          <h3 class="sub-title">Å to raÄunamo?</h3>
          <div class="calc-options">
            <label class="chk-line">
              <input type="checkbox" id="chkPod" checked />
              <span>Pod</span>
            </label>
            <label class="chk-line">
              <input type="checkbox" id="chkZidovi" checked />
              <span>Zidovi</span>
            </label>
            <label class="chk-line">
              <input type="checkbox" id="chkHidroPod" />
              <span>Hidroizolacija poda</span>
            </label>
            <label class="chk-line">
              <input type="checkbox" id="chkHidroTraka" />
              <span>Hidro traka</span>
            </label>
            <label class="chk-line">
              <input type="checkbox" id="chkSilikon" />
              <span>Silikon</span>
            </label>
          </div>

          <button id="btnCalc" class="btn primary full">ğŸ” IzraÄunaj</button>

          <div id="calcOutput" class="calc-output"></div>

          <div class="calc-actions">
            <button id="btnSaveProject" class="btn secondary">ğŸ’¾ Spremi kao projekt</button>
            <button id="btnSaveArchive" class="btn ghost">ğŸ“ Spremi u arhivu</button>
            <button id="btnExportPdf" class="btn ghost">ğŸ“„ PDF</button>
            <button id="btnExportCsv" class="btn ghost">ğŸ“Š CSV</button>
          </div>
        </section>

        <!-- PROJEKTI -->
        <section id="projectsView" class="view card">
          <h2>Projekti</h2>

          <div class="grid-2">
            <div>
              <h3 class="sub-title">Podaci o projektu</h3>
              <form id="projectMetaForm" class="form">
                <label>
                  Naziv gradiliÅ¡ta
                  <input type="text" id="metaSite" placeholder="npr. Stambena zgrada A" />
                </label>
                <label>
                  Prostorija
                  <input type="text" id="metaRoom" placeholder="npr. Kupaonica 1" />
                </label>
                <label>
                  Situacija (obraÄunska)
                  <input type="number" id="metaSituation" min="1" value="1" />
                </label>
                <label>
                  Format ploÄica
                  <select id="metaTileFormat">
                    <option value="">Odaberiâ€¦</option>
                    <option>30Ã—60</option>
                    <option>60Ã—60</option>
                    <option>80Ã—80</option>
                    <option>100Ã—100</option>
                    <option>60Ã—120</option>
                    <option>120Ã—120</option>
                    <option>100Ã—300</option>
                    <option>120Ã—280</option>
                  </select>
                </label>
                <label>
                  JediniÄna cijena (â‚¬/mÂ²)
                  <input type="number" id="metaUnitPrice" step="0.01" />
                </label>
              </form>
            </div>

            <div>
              <h3 class="sub-title">Moji projekti</h3>
              <ul id="projectList" class="list"></ul>
              <p class="hint small">Klikni projekt za uÄitavanje u brzi obraÄun.</p>
            </div>
          </div>
        </section>

        <!-- ARHIVA -->
        <section id="archiveView" class="view card">
          <h2>Arhiva obraÄuna</h2>
          <ul id="archiveList" class="list"></ul>
          <p class="hint small">Arhiva prikazuje sve spremljene obraÄune (snapshot kalkulacije).</p>
        </section>
      </section>
    </main>

    <footer class="app-footer">
      <span>Â© KOB-Keramika â€“ interni alat</span>
    </footer>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <!-- jsPDF za PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Glavni JS -->
  <script src="Js/app.js"></script>
  <script src="Js/calc.js"></script>
</body>
</html>
