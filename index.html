<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8" />
  <title>KOB-Keramika â€“ Pro obraÄun</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.webmanifest">

  <!-- OCR -->
  <script src="https://unpkg.com/tesseract.js@4.0.2/dist/tesseract.min.js"></script>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Firebase (opcionalno) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

  <style>
    :root {
      --bg: #050505;
      --card: #121212;
      --border: #333;
      --accent: #ffffff;
      --accent-soft: #888;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI";
      background: radial-gradient(circle at top, #202020 0, #000 55%);
      color: #fff;
    }

    header {
      position: sticky;
      top: 0;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    header .left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    header img.logo {
      height: 42px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.15);
      cursor: pointer;
    }

    .view { display: none; }
    .view.active { display: block; }

    main { padding: 12px; max-width: 1000px; margin: 0 auto; }

    .card {
      border-radius: 16px;
      padding: 14px 12px;
      margin-bottom: 12px;
      background: radial-gradient(circle at top left, #1c1c1c, #101010);
      border: 1px solid rgba(255,255,255,0.06);
    }

    label { font-size: 14px; display: block; margin-top: 10px; }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      background: #000;
      color: #fff;
      border: 1px solid #333;
      border-radius: 8px;
    }

    button {
      width: 100%;
      padding: 10px;
      margin-top: 12px;
      border-radius: 12px;
      background: #fff;
      color: #000;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }

    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .checkbox-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
    }

    .checkbox-row input {
      width: auto;
    }

    .section-title {
      margin-top: 16px;
      font-size: 16px;
      font-weight: bold;
      border-bottom: 1px solid #333;
      padding-bottom: 4px;
    }

  </style>
</head>
<body>

<header>
  <div class="left">
    <img src="logo.png" class="logo" id="headerLogo" />
    <div>
      <div style="font-weight:bold">KOB-Keramika</div>
      <div style="font-size:12px;opacity:0.8">Pro obraÄun prostorije</div>
    </div>
  </div>
  <div>INTERNI</div>
</header>

<main>

  <!-- HOME VIEW -->
  <section id="homeView" class="view active">
    <div class="card">
      <h2>Å to Å¾eliÅ¡ raditi?</h2>
      <button id="btnOpenAutoCalc">ğŸ“ Automatski obraÄun prostorije</button>
      <button id="btnOpenMeasures">âœï¸ RuÄni unos mjera</button>
      <button id="btnOpenCosts">ğŸ’° TroÅ¡kovi</button>
      <button id="btnOpenPrices">ğŸ’¶ Cjenik</button>
    </div>
  </section>

  <!-- NOVI AUTOMATSKI OBRAÄŒUN PROSTORIJE -->
  <section id="autoCalcView" class="view">

    <div class="card">
      <button onclick="showView('homeView')" style="background:#333;color:#fff;">â† Natrag</button>
      <h2>ğŸ“ Automatski obraÄun prostorije</h2>
      <p>Ovdje se dimenzijama automatski izraÄunava: pod, zidovi, hidro, trake, silikon, sokl, stepenice, lajsne, gerung i dodatne mjere.</p>
    </div>

    <div class="card">
      <div class="section-title">ğŸ“ Osnovne dimenzije prostorije</div>

      <label>Duljina (m)
        <input type="number" id="dimD" step="0.001">
      </label>

      <label>Å irina (m)
        <input type="number" id="dimS" step="0.001">
      </label>

      <label>Visina (m)
        <input type="number" id="dimV" step="0.001">
      </label>
    </div>

    <div class="card">
      <div class="section-title">â˜‘ Å to se raÄuna?</div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkPod">
        <label for="chkPod">Pod</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkZidovi">
        <label for="chkZidovi">Zidovi (bez odbijanja)</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkHidroPod">
        <label for="chkHidroPod">Hidroizolacija pod</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkHidroTus">
        <label for="chkHidroTus">Hidroizolacija tuÅ¡ zona</label>
      </div>
      <div class="checkbox-row">
        <input type="checkbox" id="chkHidroTraka">
        <label for="chkHidroTraka">Hidroizolacijska traka</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkSilikon">
        <label for="chkSilikon">Silikon</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkSokl">
        <label for="chkSokl">Sokl</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkStepenice">
        <label for="chkStepenice">Stepenice</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkLajsne">
        <label for="chkLajsne">Lajsne (prozor / vertikala)</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkGerung">
        <label for="chkGerung">Gerung (ruÄno)</label>
      </div>

      <div class="checkbox-row">
        <input type="checkbox" id="chkDodatne">
        <label for="chkDodatne">Dodatne mjere (3 polja)</label>
      </div>
    </div>

    
    <!-- TUÅ  ZONA -->
    <div class="card" id="cardTus" style="display:none;">
      <div class="section-title">ğŸš¿ TuÅ¡ zona</div>

      <label>Duljina tuÅ¡a (m)
        <input type="number" id="tusD" step="0.001">
      </label>

      <label>Å irina tuÅ¡a (m)
        <input type="number" id="tusS" step="0.001">
      </label>

      <label>Visina tuÅ¡a (m)
        <input type="number" id="tusV" value="2.65" step="0.001">
      </label>
    </div>

    <!-- SILIKON â€“ VIÅ E VISINA -->
    <div class="card" id="cardSilikon" style="display:none;">
      <div class="section-title">ğŸ§¼ Silikon â€“ visine</div>
      <p style="font-size:13px;opacity:0.7;">Ako prostor ima viÅ¡e visina, upiÅ¡i ih redom.</p>

      <label>Visina 1 (m)
        <input type="number" id="silV1" step="0.001">
      </label>
      <label>Visina 2 (m)
        <input type="number" id="silV2" step="0.001">
      </label>
      <label>Visina 3 (m)
        <input type="number" id="silV3" step="0.001">
      </label>
    </div>

    <!-- SOKL -->
    <div class="card" id="cardSokl" style="display:none;">
      <div class="section-title">ğŸ“ Sokl â€“ dodaci i odbijanja</div>

      <label>Odbijanje sokla (m)
        <input type="number" id="soklMinus" step="0.001">
      </label>

      <label>Dodatno sokla (m)
        <input type="number" id="soklPlus" step="0.001">
      </label>
    </div>

    <!-- STEPENICE -->
    <div class="card" id="cardStepenice" style="display:none;">
      <div class="section-title">ğŸªœ Stepenice</div>
      <label>Å irina stepenice (m)
        <input type="number" id="stepWidth" step="0.001">
      </label>

      <label>Broj stepenica
        <input type="number" id="stepCount" step="1">
      </label>

      <label>Vrsta obraÄuna
        <select id="stepMode">
          <option value="duzni">DuÅ¾ni metri</option>
          <option value="komada">Komada</option>
        </select>
      </label>
    </div>

    <!-- LAJSNE -->
    <div class="card" id="cardLajsne" style="display:none;">
      <div class="section-title">ğŸ”¹ Lajsne (ruÄni unos)</div>

      <label>Lajsna 1 (m)
        <input type="number" id="l1" step="0.001">
      </label>

      <label>Lajsna 2 (m)
        <input type="number" id="l2" step="0.001">
      </label>

      <label>Lajsna 3 (m)
        <input type="number" id="l3" step="0.001">
      </label>
    </div>

    <!-- GERUNG -->
    <div class="card" id="cardGerung" style="display:none;">
      <div class="section-title">ğŸ”ª Gerung (ruÄno)</div>

      <label>Gerung 1 (m)
        <input type="number" id="g1" step="0.001">
      </label>

      <label>Gerung 2 (m)
        <input type="number" id="g2" step="0.001">
      </label>

      <label>Gerung 3 (m)
        <input type="number" id="g3" step="0.001">
      </label>
    </div>

    <!-- DODATNE MJERE -->
    <div class="card" id="cardDodatne" style="display:none;">
      <div class="section-title">â• Dodatne mjere (3 polja)</div>

      <label>Mjera 1 (mÂ² ili m)
        <input type="number" id="dm1" step="0.001">
      </label>

      <label>Mjera 2 (mÂ² ili m)
        <input type="number" id="dm2" step="0.001">
      </label>

      <label>Mjera 3 (mÂ² ili m)
        <input type="number" id="dm3" step="0.001">
      </label>

      <div class="section-title">Gdje se dodaje?</div>

      <label><input type="checkbox" id="dmPod"> Pod</label>
      <label><input type="checkbox" id="dmZidovi"> Zidovi</label>
      <label><input type="checkbox" id="dmHidro"> Hidro</label>
      <label><input type="checkbox" id="dmSilikon"> Silikon</label>
      <label><input type="checkbox" id="dmTraka"> Hidro traka</label>
      <label><input type="checkbox" id="dmSokl"> Sokl</label>
    </div>

    <!-- GUMB ZA IZRAÄŒUN -->
    <div class="card">
      <button id="btnCalcNow">ğŸ” IzraÄunaj sve</button>
    </div>

    <!-- PRIKAZ REZULTATA -->
    <div class="card" id="calcResult" style="display:none;">
      <h3>ğŸ“Š Rezultati obraÄuna</h3>
      <div id="calcOutput"></div>
    </div>

  </section>
